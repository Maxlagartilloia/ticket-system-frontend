<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√©cnicos | CopierMaster</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos Enterprise para Tarjetas de Personal (TU ESTILO ORIGINAL) */
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .tech-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.2s;
            position: relative;
        }
        .tech-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .avatar-circle {
            width: 70px;
            height: 70px;
            background: #f1f5f9;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: #64748b;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .role-badge {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 12px;
            text-transform: uppercase;
            font-weight: 700;
            display: inline-block;
            margin-bottom: 10px;
        }
        .role-supervisor { background: #fee2e2; color: #b91c1c; border: 1px solid #fecaca; }
        .role-technician { background: #dcfce7; color: #15803d; border: 1px solid #bbf7d0; }
        
        .tech-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #f1f5f9;
        }
        .stat-item { text-align: center; }
        .stat-val { font-weight: 700; font-size: 16px; color: #1e293b; }
        .stat-lbl { font-size: 10px; color: #64748b; text-transform: uppercase; }
        
        .card-actions {
            position: absolute;
            top: 10px;
            right: 10px;
        }
        .btn-mini {
            background: none; border: none; cursor: pointer; color: #94a3b8; padding: 5px;
        }
        .btn-mini:hover { color: #1e293b; }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-brand"><img src="assets/logo.png" alt="CM"></div>
        <ul class="sidebar-menu">
            <li class="menu-item" onclick="location.href='dashboard.html'"><i class="fas fa-chart-pie"></i> Dashboard</li>
            <li class="menu-item" onclick="location.href='tickets.html'"><i class="fas fa-ticket-alt"></i> Help Desk</li>
            <li class="menu-item" onclick="location.href='institutions.html'"><i class="fas fa-building"></i> Clientes</li>
            <li class="menu-item" onclick="location.href='equipment.html'"><i class="fas fa-print"></i> Equipos</li>
            <li class="menu-item active" onclick="location.href='technicians.html'"><i class="fas fa-users-cog"></i> T√©cnicos</li>
            <li class="menu-item" onclick="location.href='reports.html'"><i class="fas fa-file-invoice-dollar"></i> Reportes</li>
        </ul>
    </aside>

    <main class="main-content">
        <header class="top-bar">
            <div class="page-title">Personal T√©cnico</div>
            <button class="btn-logout" onclick="location.href='index.html'">Salir</button>
        </header>

        <div class="scroll-area">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <div>
                    <h3 style="margin:0;">Equipo de Trabajo</h3>
                    <p style="margin:5px 0 0; font-size:13px; color:#64748b;">Gesti√≥n de roles y monitoreo de carga laboral.</p>
                </div>
                <button onclick="openRegisterModal()" class="btn-confirm" style="width:auto;">
                    <i class="fas fa-user-plus"></i> Registrar Nuevo
                </button>
            </div>
            
            <div id="techGrid" class="tech-grid">
                <div style="grid-column: 1/-1; text-align:center; padding:40px; color:#94a3b8;">
                    <i class="fas fa-spinner fa-spin"></i> Cargando staff...
                </div>
            </div>
        </div>
    </main>

    <div id="registerModal" class="modal-overlay">
        <div class="modal-box">
            <h3 class="modal-title">üë§ Registrar Nuevo Usuario</h3>
            <p style="color:#64748b; font-size:13px; margin-bottom:15px;">Crea credenciales para un nuevo miembro del equipo.</p>
            
            <form id="registerForm">
                <label>Nombre Completo</label>
                <input type="text" id="regName" placeholder="Ej: Sa√∫l Quevedo" required>

                <label>Correo Electr√≥nico</label>
                <input type="email" id="regEmail" placeholder="Ej: saul@empresa.com" required>

                <label>Contrase√±a</label>
                <input type="password" id="regPass" placeholder="M√≠nimo 6 caracteres" required>

                <label>Rol Asignado</label>
                <select id="regRole">
                    <option value="technician">T√©cnico</option>
                    <option value="supervisor">Supervisor</option>
                </select>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeRegisterModal()">Cancelar</button>
                    <button type="submit" class="btn-confirm">Crear Usuario</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/security.js"></script>
    <script src="js/technicians.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabase.js"></script>
<script src="js/security.js"></script>
<script src="js/technicians.js"></script>
</body>
</html>
